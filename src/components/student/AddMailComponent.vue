<template>

  <v-btn @click="dialog = !dialog">메일쓰기</v-btn>

  <!-- post dialog -->
  <v-dialog v-model="dialog">

    <v-card>
      <v-card-text style="text-align: center">
        <div class="v-container">
          <v-form>
            <v-container style="margin: 10px" >

              <v-text-field
                v-model="addMail.toEmail"
                label="수신 (abcd123@gmail.com)"
                variant="outlined"
              ></v-text-field>

              <v-text-field
                v-model="addMail.title"
                label="제목 입력"
                variant="outlined"
              ></v-text-field>

              <v-text-field
                v-model="addMail.content"
                label="내용 입력"
                variant="outlined"
              ></v-text-field>
            </v-container>
          </v-form>
        </div>
      </v-card-text>
      <v-card-actions class="justify-center">
        <v-btn color="grey" @click="onClickSend"> 전송</v-btn>
        <v-btn color="grey" @click="dialog = false"> 취소</v-btn>
      </v-card-actions>
    </v-card>

  </v-dialog>

</template>

<script setup>

import {ref, watch} from "vue";
import useMemberInfo from "@/store/useMemberInfo";
const memberInfo = useMemberInfo().getMemberInfo()
const emailAddress = memberInfo.email

const emits = defineEmits(['postMail', 'componentKey'])

const addMail = ref({
  toEmail: '',
  fromEmail: emailAddress,
  title: '',
  content: ''
})

const dialog = ref(false)

const onClickSend = () => {

  emits('postMail', addMail.value)

  dialog.value = !dialog.value

  addMail.value = {
    toEmail: '',
    fromEmail: emailAddress,
    title: '',
    content: ''
  }
}

watch(dialog, async () => {

  await emits('componentKey')

});

</script>

<style scoped>

</style>
